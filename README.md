# PropSky æœƒè¨ˆå¾Œç«¯æ•¸æ“šæŒ‡æ¨™å„€è¡¨æ¿

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

é€™æ˜¯ä¸€å€‹**å‰ç«¯è¨­è¨ˆåƒè€ƒé é¢**ï¼Œå±•ç¤º PropSky æœƒè¨ˆç³»çµ±çš„å¾Œç«¯æ•¸æ“šè¦–è¦ºåŒ–å„€è¡¨æ¿ã€‚æœ¬å°ˆæ¡ˆç‚ºå‰ç«¯å·¥ç¨‹å¸«å’Œ UI/UX è¨­è¨ˆå¸«æä¾›å®Œæ•´çš„ä»‹é¢è¨­è¨ˆç¯„ä¾‹ï¼ŒåŒ…å«æ•¸æ“šå±•ç¤ºã€ç¯©é¸åŠŸèƒ½å’ŒéŸ¿æ‡‰å¼ä½ˆå±€ã€‚

## ğŸ¯ ç›®æ¨™ç”¨æˆ¶

- **å‰ç«¯å·¥ç¨‹å¸«**: åƒè€ƒä»‹é¢å¯¦ä½œå’Œ JavaScript é‚è¼¯
- **UI/UX è¨­è¨ˆå¸«**: äº†è§£æ•¸æ“šå„€è¡¨æ¿çš„è¨­è¨ˆæ¨¡å¼å’Œäº’å‹•æµç¨‹
- **ç”¢å“ç¶“ç†**: æª¢è¦–åŠŸèƒ½éœ€æ±‚å’Œç”¨æˆ¶é«”é©—æµç¨‹

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸ“Š æ•¸æ“šæ¨¡çµ„
- **JJBB åˆ·å¡è³‡æ–™**: ç‡Ÿæ”¶ã€æ‰‹çºŒè²»ã€æ—¥ç§Ÿè²»ã€å¯¦éš›å…¥å¸³ç­‰è²¡å‹™æŒ‡æ¨™
- **é–‹å¿ƒå°å¡ç‡Ÿæ¥­è³‡æ–™**: å¹£é‡ã€å‡ºçæ¬¡æ•¸ã€é›»å­æ”¯ä»˜æ¬¡æ•¸ç­‰éŠæˆ²ç‡Ÿé‹æ•¸æ“š
- **ä¸­è¯é›»ä¿¡è³‡æ–™**: é ç•™æ“´å±•åŠŸèƒ½å€å¡Š

### ğŸ›ï¸ äº’å‹•åŠŸèƒ½
- å¤šé ç±¤åˆ‡æ› (Tab Navigation)
- å ´åœ°ç¯©é¸ (å–®ä¸€å ´åœ°/æ‰€æœ‰å ´åœ°å€‹åˆ¥/æ‰€æœ‰å ´åœ°åŠ ç¸½)
- æ—¥æœŸç¯„åœæŸ¥è©¢
- è³‡æ–™è¡¨æ ¼å±•ç¤º
- æ¨¡æ“¬æ•¸æ“šè‡ªå‹•æ›´æ–° (æ¯ 10 ç§’)
- å ±è¡¨åŒ¯å‡ºæŒ‰éˆ• (UI Only)

### ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ
- æ”¯æ´æ¡Œé¢å’Œè¡Œå‹•è£ç½®
- ä½¿ç”¨ Tailwind CSS æ¡†æ¶
- å½ˆæ€§ç¶²æ ¼ä½ˆå±€å’Œé©æ‡‰å¼çµ„ä»¶

## ğŸ”§ æŠ€è¡“æ¶æ§‹

```
æŠ€è¡“æ£§:
â”œâ”€â”€ HTML5 - èªç¾©åŒ–çµæ§‹
â”œâ”€â”€ CSS3 - ä½¿ç”¨ Tailwind CSS æ¡†æ¶
â”œâ”€â”€ JavaScript (ES6+) - åŸç”Ÿ JSï¼Œç„¡å¤–éƒ¨ä¾è³´
â””â”€â”€ Google Fonts - Inter + Noto Sans TC å­—é«”
```

## ğŸ—‚ï¸ æª”æ¡ˆçµæ§‹

```
propsky-accounting-dashboard/
â”œâ”€â”€ index.html          # ä¸»è¦å„€è¡¨æ¿é é¢
â”œâ”€â”€ CLAUDE.md           # Claude Code é–‹ç™¼æŒ‡å—
â”œâ”€â”€ README.md           # å°ˆæ¡ˆèªªæ˜ (æœ¬æª”æ¡ˆ)
â””â”€â”€ .gitignore         # Git å¿½ç•¥æª”æ¡ˆè¨­å®š
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æœ¬åœ°é è¦½
```bash
# ç›´æ¥ç”¨ç€è¦½å™¨é–‹å•Ÿ
open index.html

# æˆ–ä½¿ç”¨ç°¡å–®çš„ HTTP ä¼ºæœå™¨
python -m http.server 8000
# ç„¶å¾Œé–‹å•Ÿ http://localhost:8000
```

### GitHub Pages éƒ¨ç½²
1. Fork æˆ– Clone æ­¤å°ˆæ¡ˆ
2. åœ¨ GitHub å„²å­˜åº«è¨­å®šä¸­å•Ÿç”¨ Pages
3. é¸æ“‡ `main` åˆ†æ”¯ä½œç‚ºä¾†æº
4. ç¶²ç«™å°‡è‡ªå‹•éƒ¨ç½²åˆ° `https://æ‚¨çš„ç”¨æˆ¶å.github.io/å„²å­˜åº«åç¨±`

## âš ï¸ é‡è¦æ³¨æ„äº‹é …

### ğŸ”´ è³‡æ–™å®‰å…¨
- **æ­¤ç‚ºå‰ç«¯å±•ç¤ºé é¢ï¼Œæ‰€æœ‰è³‡æ–™å‡ç‚ºæ¨¡æ“¬æ•¸æ“š**
- **è«‹å‹¿åœ¨æ­¤é é¢ä¸­åŠ å…¥çœŸå¯¦çš„ç‡Ÿé‹æ•¸æ“šæˆ–æ•æ„Ÿè³‡è¨Š**
- å¯¦éš›éƒ¨ç½²æ™‚éœ€è¦ç§»é™¤æ‰€æœ‰æ¨¡æ“¬æ•¸æ“šç”¢ç”Ÿé‚è¼¯

### ğŸ”§ é–‹ç™¼æ³¨æ„äº‹é …
- **API æ•´åˆ**: é é¢å·²é ç•™ API ç«¯é»å»ºè­°ï¼Œå¯¦éš›é–‹ç™¼æ™‚éœ€è¦æ›¿æ›æ¨¡æ“¬æ•¸æ“š
- **è³‡æ–™æ ¼å¼**: è«‹ç¢ºä¿å¾Œç«¯ API å›å‚³çš„è³‡æ–™çµæ§‹èˆ‡å‰ç«¯é æœŸæ ¼å¼ä¸€è‡´
- **éŒ¯èª¤è™•ç†**: ç›®å‰ç¼ºå°‘ç¶²è·¯éŒ¯èª¤å’Œç©ºè³‡æ–™çš„è™•ç†é‚è¼¯
- **è¼‰å…¥ç‹€æ…‹**: å¯¦éš›é–‹ç™¼æ™‚éœ€è¦åŠ å…¥è¼‰å…¥æŒ‡ç¤ºå™¨å’Œéª¨æ¶å±

### ğŸ¨ UI/UX è€ƒé‡
- **ç¹é«”ä¸­æ–‡ä»‹é¢**: æ‰€æœ‰æ–‡å­—å…§å®¹æ‡‰ä¿æŒç¹é«”ä¸­æ–‡
- **è‰²å½©ç³»çµ±**: ä½¿ç”¨ Tailwind CSS é è¨­èª¿è‰²ç›¤ï¼Œå¯æ ¹æ“šå“ç‰Œéœ€æ±‚èª¿æ•´
- **å­—å‹é¸æ“‡**: Inter (è‹±æ–‡) + Noto Sans TC (ä¸­æ–‡) çµ„åˆ
- **äº’å‹•å›é¥‹**: éœ€è¦åŠ å¼·æŒ‰éˆ•é»æ“Šå’Œç‹€æ…‹è®ŠåŒ–çš„è¦–è¦ºå›é¥‹

### ğŸ”’ è³‡è¨Šå®‰å…¨
- è«‹ç¢ºä¿ç”Ÿç”¢ç’°å¢ƒä¸­ç§»é™¤æ‰€æœ‰é–‹ç™¼ç”¨çš„è¨»è§£å’Œæ¨¡æ“¬é‚è¼¯
- å¯¦ä½œé©ç•¶çš„è¼¸å…¥é©—è­‰å’Œ XSS é˜²è­·
- ä½¿ç”¨ HTTPS å’Œé©ç•¶çš„ CSP æ¨™é ­

## ğŸ“Š å¯¦éš› API æ•´åˆæŒ‡å¼•

### ğŸ”— API åŸºç¤è³‡è¨Š
- **API æ–‡æª”**: https://smartpay.propskynet.com/docs
- **åŸºç¤ URL**: `https://smartpay.propskynet.com`
- **èªè­‰æ–¹å¼**: OAuth2 Bearer Token

### ğŸª èˆ‡ç›®å‰é é¢å°æ‡‰çš„ API ç«¯é»

#### 1. JJBB åˆ·å¡è³‡æ–™ â†’ å¡æ©Ÿç®¡ç† API
```javascript
// å–å¾—å¡æ©Ÿåˆ—è¡¨ (å°æ‡‰ JJBB æ©Ÿå°è³‡æ–™)
GET /api/cardmachines
Query Parameters:
- page: é æ•¸
- per_page: æ¯é ç­†æ•¸
- store_id: åº—å®¶ ID (å°æ‡‰å ´åœ°ç¯©é¸)
- start_date: é–‹å§‹æ—¥æœŸ
- end_date: çµæŸæ—¥æœŸ

// å›æ‡‰è³‡æ–™çµæ§‹å°æ‡‰å‰ç«¯æ¬„ä½:
{
  "data": [
    {
      "id": "machine_id",           // â†’ æ©Ÿå° ID
      "store_name": "site_name",    // â†’ å ´åœ°åç¨±  
      "daily_revenue": "gross_revenue",     // â†’ ç‡Ÿæ”¶ç¸½é¡
      "transaction_fee": "gateway_fee",     // â†’ é‡‘æµæ‰‹çºŒè²»
      "daily_rent": "daily_rent",           // â†’ æ—¥ç§Ÿè²»
      "net_amount": "net_settlement",       // â†’ å¯¦éš›å…¥å¸³ç¸½é¡
      "transaction_count": "txn_count",     // â†’ äº¤æ˜“æ¬¡æ•¸
      "settlement_date": "settlement_date"  // â†’ çµç®—æ—¥æœŸ
    }
  ]
}
```

#### 2. é–‹å¿ƒå°å¡ç‡Ÿæ¥­è³‡æ–™ â†’ å¨ƒå¨ƒæ©Ÿç®¡ç† API  
```javascript
// å–å¾—å¨ƒå¨ƒæ©Ÿçµ±è¨ˆè³‡æ–™ (å°æ‡‰é–‹å¿ƒå°å¡è³‡æ–™)
GET /api/claw-machines
Query Parameters:
- page: é æ•¸
- per_page: æ¯é ç­†æ•¸  
- store_id: åº—å®¶ ID
- start_date: é–‹å§‹æ—¥æœŸ
- end_date: çµæŸæ—¥æœŸ

// å›æ‡‰è³‡æ–™çµæ§‹å°æ‡‰å‰ç«¯æ¬„ä½:
{
  "data": [
    {
      "id": "machine_id",              // â†’ æ©Ÿå° ID
      "store_name": "site_name",       // â†’ å ´åœ°åç¨±
      "coin_count": "coin_count",      // â†’ å¹£é‡
      "payout_count": "payout_count",  // â†’ å‡ºçæ¬¡æ•¸
      "epay_count": "epay_count",      // â†’ é›»å­æ”¯ä»˜æ¬¡æ•¸
      "gift_rounds": "gift_rounds",    // â†’ è´ˆçå±€æ¬¡æ•¸
      "free_rounds": "free_rounds",    // â†’ å…è²»å±€æ¬¡æ•¸
      "settlement_date": "settlement_date"
    }
  ]
}
```

#### 3. åº—å®¶è³‡æ–™ â†’ å ´åœ°ç¯©é¸é¸é …
```javascript
// å–å¾—åº—å®¶åˆ—è¡¨ (ç”¨æ–¼å ´åœ°ç¯©é¸ä¸‹æ‹‰é¸å–®)
GET /api/stores
Response:
{
  "data": [
    {
      "id": 1,
      "name": "ä¿¡ç¾©A8é¤¨",
      "status": "active"
    }
  ]
}
```

### ğŸ”§ å‰ç«¯å·¥ç¨‹å¸«å¯¦ä½œå»ºè­°

#### API æ•´åˆæ­¥é©Ÿ
1. **èªè­‰è™•ç†**: å¯¦ä½œ OAuth2 token ç®¡ç†
2. **è³‡æ–™æ˜ å°„**: å°‡ API å›æ‡‰æ˜ å°„åˆ°å‰ç«¯è³‡æ–™æ ¼å¼
3. **éŒ¯èª¤è™•ç†**: åŠ å…¥ API å¤±æ•—å’Œç¶²è·¯éŒ¯èª¤è™•ç†
4. **åˆ†é è™•ç†**: å¯¦ä½œè³‡æ–™åˆ†é è¼‰å…¥
5. **ç¯©é¸é‚è¼¯**: æ•´åˆåº—å®¶ç¯©é¸å’Œæ—¥æœŸç¯„åœæŸ¥è©¢

#### ç¯„ä¾‹å¯¦ä½œ (JavaScript)
```javascript
// ç¯„ä¾‹: å–å¾— JJBB è³‡æ–™çš„å‡½æ•¸
async function fetchJjbbData(filters = {}) {
  const params = new URLSearchParams({
    page: 1,
    per_page: 25,
    ...filters
  });
  
  try {
    const response = await fetch(`https://smartpay.propskynet.com/api/cardmachines?${params}`, {
      headers: {
        'Authorization': `Bearer ${getAccessToken()}`,
        'Content-Type': 'application/json'
      }
    });
    
    if (!response.ok) throw new Error('API request failed');
    
    const data = await response.json();
    return mapToFrontendFormat(data.data);
  } catch (error) {
    console.error('Failed to fetch JJBB data:', error);
    return [];
  }
}

// è³‡æ–™æ˜ å°„å‡½æ•¸
function mapToFrontendFormat(apiData) {
  return apiData.map(item => ({
    settlement_date: item.settlement_date,
    site_name: item.store_name,
    machine_id: item.id,
    gross_revenue: item.daily_revenue || 0,
    gateway_fee: item.transaction_fee || 0,
    daily_rent: item.daily_rent || 0,
    net_settlement: item.net_amount || 0,
    txn_count: item.transaction_count || 0
  }));
}
```

### âš ï¸ API æ•´åˆæ³¨æ„äº‹é …
1. **è³‡æ–™å°æ‡‰**: ç›®å‰é é¢çš„æ¨¡æ“¬æ¬„ä½å·²å°æ‡‰å¯¦éš› API çµæ§‹
2. **èªè­‰ Token**: éœ€è¦å¯¦ä½œ OAuth2 èªè­‰æµç¨‹
3. **åˆ†é è™•ç†**: API æ”¯æ´åˆ†é ï¼Œéœ€è¦è™•ç†å¤§é‡è³‡æ–™è¼‰å…¥
4. **éŒ¯èª¤ç‹€æ…‹**: åŠ å…¥ loadingã€error å’Œ empty ç‹€æ…‹è™•ç†
5. **è³‡æ–™å¿«å–**: è€ƒæ…®å¯¦ä½œé©ç•¶çš„è³‡æ–™å¿«å–ç­–ç•¥

### ğŸ“ˆ é¡å¤–å¯ç”¨çš„ API åŠŸèƒ½
- **Excel åŒ¯å‡º**: `/api/cardmachines/export` - æ”¯æ´å ±è¡¨åŒ¯å‡ºåŠŸèƒ½
- **æ‰¹é‡æ“ä½œ**: æ”¯æ´ Excel æ‰¹é‡ä¸Šå‚³å’Œæ›´æ–°
- **å³æ™‚ç‹€æ…‹**: å¨ƒå¨ƒæ©Ÿé€£ç·šç‹€æ…‹å³æ™‚æ›´æ–°
- **è²¡å‹™çµ±è¨ˆ**: `/api/accounting` - è©³ç´°è²¡å‹™å ±è¡¨

## ğŸ“ æˆæ¬Š

æ­¤å°ˆæ¡ˆç‚ºå…§éƒ¨é–‹ç™¼åƒè€ƒç”¨é€”ï¼Œè«‹éµå¾ªå…¬å¸å…§éƒ¨çš„ç¨‹å¼ç¢¼ä½¿ç”¨è¦ç¯„ã€‚

---

**æ³¨æ„**: é€™æ˜¯ä¸€å€‹è¨­è¨ˆåƒè€ƒé é¢ï¼Œå¯¦éš›éƒ¨ç½²å‰è«‹ç¢ºä¿æ‰€æœ‰æ•æ„Ÿè³‡è¨Šå·²è¢«ç§»é™¤ï¼Œä¸¦å¯¦ä½œé©ç•¶çš„å®‰å…¨é˜²è­·æªæ–½ã€‚